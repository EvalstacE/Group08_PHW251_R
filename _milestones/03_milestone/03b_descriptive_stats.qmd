
## Descriptive Statistics: Morbidity Datasets

```{r}

##--combined df (CA + LA + Population)
df <- read.csv(file = here("_data/cleaned_data/combined_df.csv"))

##--individual, cleaned dfs:
ca_df <- read.csv(file = here("_data/cleaned_data/cleaned_ca_df.csv"))
la_cnty_df <- read.csv(file = here("_data/cleaned_data/cleaned_la_cnty_df.csv"))
pop_df <- read.csv(file = here("_data/cleaned_data/cleaned_pop_df.csv"))

```


to do: 

* Overall descriptive stats: 

  * infections by age group / county / region / race/ethnicity 
  * severe infections by age group / county / region / race/ethnicity
  * unrecovered infections by age group / county / region / race/ethnicity
  
  * infections/severe infections/unrecovered infections by MMWR week
  * infections/severe infections/unrecovered infections by MMWR week / county or region

* Create a rate metric and summarize to include only one row per strata of interest

    * age-adjusted rates - compare AAR across county / region
    * Incidence rate / densities by age group and month?
    * Incidence rate / densities by race/ethnicity and month?
    
* Aggregate the data into a new dataframe(s) to include only one row per strata of interest


## By County and Health Officer Region

```{r}


by_cnty_week <- 
  counts_week_groups(
      df = df, mmwr_year, mmwr_week, 
      county, health_officer_region
    )

by_cnty_pop <-
  calc_total_rates_pop(
      df = df, pop_col = total_cnty_pop, 
      health_officer_region, county
    ) %>%
  arrange(health_officer_region, county)


by_HOR_week <- 
  counts_week_groups(df = df, mmwr_year, mmwr_week, health_officer_region)

by_HOR_pop <-
  calc_total_rates_pop(
      df = df, pop_col = total_cnty_pop, 
      health_officer_region, county
    ) %>%
  arrange(health_officer_region, county)






```




## By Sex

* initial note: males have higher infection rate; but females have higher rates of severe infections and unrecovered

```{r}


by_sex_cnty <-
  calc_total_rates_pop(
      df = df, pop_col = total_sex_pop, 
      health_officer_region, county, sex
    ) %>%
  arrange(health_officer_region, county, sex)


by_sex_total <-
  calc_total_rates_pop(df = df, pop_col = total_sex_pop, sex) 

```


## By Race and Ethnicity 

* initial note: Hispanic population has highest infection rate, severe infection rate, and unrecovered rate -- all across the board -- this community is being impacted the most.

```{r}


by_race_cnty <-
  calc_total_rates_pop(
      df = df, pop_col = total_race_pop, 
      health_officer_region, county, race_long
    ) %>%
  arrange(health_officer_region, county, race_long)


by_race_total <-
  calc_total_rates_pop(df = df, pop_col = total_race_pop, race_long) 

```


