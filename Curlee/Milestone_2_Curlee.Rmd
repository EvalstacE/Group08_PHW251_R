---
title: "Milestone_2_Curlee"
author: "Curlee"
date: "2025-10-05" 
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# importing data
```{r}
getwd()
library(readr)
sim_novelid_CA <- read_csv("_data/scenario_1/sim_novelid_CA.csv")
View(sim_novelid_CA)
```

# sort columns in ascending alphabetical order 
```{r}
new_order = sort(colnames(sim_novelid_CA))
sim_novelid_CA <- sim_novelid_CA[, new_order]
```



# don't need this for this df but good to use for other data frames
#convert all column names to lower case and underscores where spaces are
```{r}
names(sim_novelid_CA) <- tolower(names(sim_novelid_CA))

```


Separate diagnosis year, month and day
```{r}
library(stringr) # to use str_sub
sim_novelid_CA$yr_dt_dx <- str_sub(sim_novelid_CA$dt_diagnosis, 1,4) # extracted year only
sim_novelid_CA$mo_dt_dx <- str_sub(sim_novelid_CA$dt_diagnosis, 6,7) # extracted month only
sim_novelid_CA$day_dt_dx <- str_sub(sim_novelid_CA$dt_diagnosis, 9,10) # extracted year only


```

convert diagnosis year, month and day to numeric
```{r}
sim_novelid_CA$yr_dt_dx <- as.numeric(sim_novelid_CA$yr_dt_dx) # convert to numeric
sim_novelid_CA$mo_dt_dx <- as.numeric(sim_novelid_CA$mo_dt_dx) # convert to numeric
sim_novelid_CA$day_dt_dx <- as.numeric(sim_novelid_CA$day_dt_dx) # convert to numeric

```

# checking how DOF codes race/ethnicity
```{r}
unique(scenario_one_simulated_novelid_codebook$...5)

# 1 = \"White, Non-Hispanic\",
# 2 = \"Black, Non-Hispanic\",
# 3 = \"American Indian or Alaska Native, Non-Hispanic\",
# 4 = \"Asian, Non-Hispanic\",
# 5 = \"Native Hawaiian or Pacific Islander, Non-Hispanic\",
# 6 = \"Multiracial (two or more of above races), Non-Hispanic\",
# 7 = \"Hispanic (any race)\",
# 9 = \"Unknown)


```

#change race/ethnicity to match DOF race/ethnicity
```{r}
library(dplyr)
sim_novelid_CA <- sim_novelid_CA %>% 
  mutate(
    race_ethnicity = case_when(
      race_ethnicity == '1' ~ "White, Non-Hispanic",
      race_ethnicity == '2' ~ "Black, Non-Hispanic",
      race_ethnicity == '3' ~ "American Indian or Alaskan Native, Non-Hispanic",
      race_ethnicity == '4' ~ "Asian, Non-Hispanic",
      race_ethnicity == '5' ~ "Native Hawaiian or Pacific Islander, Non-Hispanic",
      race_ethnicity == '6' ~ "Multiracial (two or more races), Non-Hispanic",
      race_ethnicity == '7' ~ "Hispanic (any race)",
      race_ethnicity == '9' ~ "Unknown",
      TRUE ~ as.character(race_ethnicity)
    )
  )


```

# Separate resp season year and week
```{r}
sim_novelid_CA$yr_season_resp <- str_sub(sim_novelid_CA$time_int, 1,4) # extracted year only
sim_novelid_CA$wk_season_resp <- str_sub(sim_novelid_CA$time_int, 5,6) # extracted week only


```


```{r}




```

